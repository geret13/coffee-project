var cleanBuildDirectory, gulp, log, path;

path = require("path");

gulp = require("gulp");

log = require("../lib/log");

cleanBuildDirectory = require("../lib/clean").cleanBuildDirectory;

module.exports = function(coffeeProjectOptions) {
  var clientDirectoryPath, enabled, options, serverDirectoryPath, targetDirectoryPath;
  options = coffeeProjectOptions.clean;
  enabled = options.enabled;
  targetDirectoryPath = path.resolve(options.targetDirectoryPath);
  clientDirectoryPath = path.resolve(options.clientDirectoryPath);
  serverDirectoryPath = path.resolve(options.serverDirectoryPath);
  gulp.task("clean:client", function(cb) {
    if (!enabled) {
      log.info("Skipping clean client: Disabled.");
      return cb();
    }
    log.debug("[clean] Cleaning client build path `" + clientDirectoryPath + "`.");
    cleanBuildDirectory(clientDirectoryPath, cb);
  });
  gulp.task("clean:server", function(cb) {
    if (!enabled) {
      log.info("Skipping clean server: Disabled.");
      return cb();
    }
    log.debug("[clean] Cleaning server build path `" + serverDirectoryPath + "`.");
    cleanBuildDirectory(serverDirectoryPath, cb);
  });
  return gulp.task("clean", ["clean:client", "clean:server"], function(cb) {
    cb();
    process.exit();
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhc2tzL2NsZWFuLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7QUFDUCxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVI7O0FBRVAsR0FBQSxHQUFNLE9BQUEsQ0FBUSxZQUFSOztBQUVKLHNCQUF3QixPQUFBLENBQVEsY0FBUixFQUF4Qjs7QUFFRixNQUFNLENBQUMsT0FBUCxHQUFpQixTQUFDLG9CQUFEO0FBQ2hCLE1BQUE7RUFBQSxPQUFBLEdBQXNCLG9CQUFvQixDQUFDO0VBQzNDLE9BQUEsR0FBc0IsT0FBTyxDQUFDO0VBQzlCLG1CQUFBLEdBQXNCLElBQUksQ0FBQyxPQUFMLENBQWEsT0FBTyxDQUFDLG1CQUFyQjtFQUN0QixtQkFBQSxHQUFzQixJQUFJLENBQUMsT0FBTCxDQUFhLE9BQU8sQ0FBQyxtQkFBckI7RUFDdEIsbUJBQUEsR0FBc0IsSUFBSSxDQUFDLE9BQUwsQ0FBYSxPQUFPLENBQUMsbUJBQXJCO0VBRXRCLElBQUksQ0FBQyxJQUFMLENBQVUsY0FBVixFQUEwQixTQUFDLEVBQUQ7SUFDekIsSUFBQSxDQUFPLE9BQVA7TUFDQyxHQUFHLENBQUMsSUFBSixDQUFTLGtDQUFUO0FBQ0EsYUFBTyxFQUFBLENBQUEsRUFGUjs7SUFJQSxHQUFHLENBQUMsS0FBSixDQUFVLHNDQUFBLEdBQXVDLG1CQUF2QyxHQUEyRCxJQUFyRTtJQUVBLG1CQUFBLENBQW9CLG1CQUFwQixFQUF5QyxFQUF6QztFQVB5QixDQUExQjtFQVdBLElBQUksQ0FBQyxJQUFMLENBQVUsY0FBVixFQUEwQixTQUFDLEVBQUQ7SUFDekIsSUFBQSxDQUFPLE9BQVA7TUFDQyxHQUFHLENBQUMsSUFBSixDQUFTLGtDQUFUO0FBQ0EsYUFBTyxFQUFBLENBQUEsRUFGUjs7SUFJQSxHQUFHLENBQUMsS0FBSixDQUFVLHNDQUFBLEdBQXVDLG1CQUF2QyxHQUEyRCxJQUFyRTtJQUVBLG1CQUFBLENBQW9CLG1CQUFwQixFQUF5QyxFQUF6QztFQVB5QixDQUExQjtTQVdBLElBQUksQ0FBQyxJQUFMLENBQVUsT0FBVixFQUFtQixDQUFDLGNBQUQsRUFBaUIsY0FBakIsQ0FBbkIsRUFBcUQsU0FBQyxFQUFEO0lBQ3BELEVBQUEsQ0FBQTtJQUVBLE9BQU8sQ0FBQyxJQUFSLENBQUE7RUFIb0QsQ0FBckQ7QUE3QmdCIiwiZmlsZSI6InRhc2tzL2NsZWFuLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsicGF0aCA9IHJlcXVpcmUgXCJwYXRoXCJcbmd1bHAgPSByZXF1aXJlIFwiZ3VscFwiXG5cbmxvZyA9IHJlcXVpcmUgXCIuLi9saWIvbG9nXCJcblxueyBjbGVhbkJ1aWxkRGlyZWN0b3J5IH0gPSByZXF1aXJlIFwiLi4vbGliL2NsZWFuXCJcblxubW9kdWxlLmV4cG9ydHMgPSAoY29mZmVlUHJvamVjdE9wdGlvbnMpIC0+XG5cdG9wdGlvbnMgICAgICAgICAgICAgPSBjb2ZmZWVQcm9qZWN0T3B0aW9ucy5jbGVhblxuXHRlbmFibGVkICAgICAgICAgICAgID0gb3B0aW9ucy5lbmFibGVkXG5cdHRhcmdldERpcmVjdG9yeVBhdGggPSBwYXRoLnJlc29sdmUgb3B0aW9ucy50YXJnZXREaXJlY3RvcnlQYXRoXG5cdGNsaWVudERpcmVjdG9yeVBhdGggPSBwYXRoLnJlc29sdmUgb3B0aW9ucy5jbGllbnREaXJlY3RvcnlQYXRoXG5cdHNlcnZlckRpcmVjdG9yeVBhdGggPSBwYXRoLnJlc29sdmUgb3B0aW9ucy5zZXJ2ZXJEaXJlY3RvcnlQYXRoXG5cblx0Z3VscC50YXNrIFwiY2xlYW46Y2xpZW50XCIsIChjYikgLT5cblx0XHR1bmxlc3MgZW5hYmxlZFxuXHRcdFx0bG9nLmluZm8gXCJTa2lwcGluZyBjbGVhbiBjbGllbnQ6IERpc2FibGVkLlwiXG5cdFx0XHRyZXR1cm4gY2IoKVxuXG5cdFx0bG9nLmRlYnVnIFwiW2NsZWFuXSBDbGVhbmluZyBjbGllbnQgYnVpbGQgcGF0aCBgI3tjbGllbnREaXJlY3RvcnlQYXRofWAuXCJcblxuXHRcdGNsZWFuQnVpbGREaXJlY3RvcnkgY2xpZW50RGlyZWN0b3J5UGF0aCwgY2JcblxuXHRcdHJldHVyblxuXG5cdGd1bHAudGFzayBcImNsZWFuOnNlcnZlclwiLCAoY2IpIC0+XG5cdFx0dW5sZXNzIGVuYWJsZWRcblx0XHRcdGxvZy5pbmZvIFwiU2tpcHBpbmcgY2xlYW4gc2VydmVyOiBEaXNhYmxlZC5cIlxuXHRcdFx0cmV0dXJuIGNiKClcblxuXHRcdGxvZy5kZWJ1ZyBcIltjbGVhbl0gQ2xlYW5pbmcgc2VydmVyIGJ1aWxkIHBhdGggYCN7c2VydmVyRGlyZWN0b3J5UGF0aH1gLlwiXG5cblx0XHRjbGVhbkJ1aWxkRGlyZWN0b3J5IHNlcnZlckRpcmVjdG9yeVBhdGgsIGNiXG5cblx0XHRyZXR1cm5cblxuXHRndWxwLnRhc2sgXCJjbGVhblwiLCBbXCJjbGVhbjpjbGllbnRcIiwgXCJjbGVhbjpzZXJ2ZXJcIl0sIChjYikgLT5cblx0XHRjYigpXG5cblx0XHRwcm9jZXNzLmV4aXQoKVxuXG5cdFx0cmV0dXJuXG5cbiJdfQ==
